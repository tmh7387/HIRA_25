{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tmh73\\\\Aviation Synergy\\\\MaXwell AI - General\\\\HIRA_25\\\\src\\\\components\\\\AssessmentForm.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useRiskMatrixStore } from '../stores/riskMatrixStore';\nimport ICAORiskMatrix from './ICAORiskMatrix';\nimport IntegratedRiskMatrix from './IntegratedRiskMatrix';\nimport { calculateICAORiskTolerability } from '../utils/riskCalculations';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AssessmentForm({\n  groupedAssessments,\n  setValue,\n  onSubmit,\n  isSubmitting\n}) {\n  _s();\n  const {\n    matrixType\n  } = useRiskMatrixStore();\n\n  // Flatten assessments list for indexing\n  const allAssessments = Object.values(groupedAssessments).flatMap(group => group.assessments);\n  const handleMatrixChange = (assessmentId, values) => {\n    const assessmentIndex = allAssessments.findIndex(a => a.consequence_id === assessmentId);\n    if (assessmentIndex === -1) {\n      console.error('Assessment not found for consequence_id:', assessmentId);\n      return;\n    }\n    console.log('Updating assessment:', assessmentId, 'at index:', assessmentIndex, 'with values:', values);\n    if (matrixType === 'ICAO') {\n      setValue(`assessments.${assessmentIndex}.probability`, values.probability);\n      setValue(`assessments.${assessmentIndex}.severity`, values.severity);\n      if (values.probability && values.severity) {\n        const tolerability = calculateICAORiskTolerability(values.probability, values.severity);\n        setValue(`assessments.${assessmentIndex}.tolerability`, tolerability);\n      }\n    } else {\n      setValue(`assessments.${assessmentIndex}.likelihood`, values.likelihood);\n      setValue(`assessments.${assessmentIndex}.impact`, values.impact);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    className: \"space-y-6\",\n    children: [Object.entries(groupedAssessments).map(([event_id, {\n      event,\n      assessments\n    }], groupIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-800 mb-4\",\n        children: event\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: assessments.map((assessment, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 rounded-lg p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700\",\n              children: \"Hazard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: assessment.hazard\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700\",\n              children: \"Consequence\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: assessment.consequence\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-gray-700\",\n              children: \"Current Controls\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: assessment.current_controls\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: matrixType === 'ICAO' ? /*#__PURE__*/_jsxDEV(ICAORiskMatrix, {\n              probability: assessment.probability,\n              severity: assessment.severity,\n              onChange: values => handleMatrixChange(assessment.consequence_id, values),\n              showTolerability: true,\n              tolerability: assessment.tolerability\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(IntegratedRiskMatrix, {\n              likelihood: assessment.likelihood,\n              impact: assessment.impact,\n              onChange: values => handleMatrixChange(assessment.consequence_id, values),\n              showRiskLevel: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 17\n          }, this)]\n        }, `assessment-${assessment.consequence_id}-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)]\n    }, `group-${event_id}-${groupIndex}`, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: isSubmitting,\n        className: `px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 ${isSubmitting ? 'opacity-50 cursor-not-allowed' : ''}`,\n        children: isSubmitting ? 'Saving...' : 'Next Step'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(AssessmentForm, \"RBfpc2TzLVNk6ev/81vSUFg7cCQ=\", false, function () {\n  return [useRiskMatrixStore];\n});\n_c = AssessmentForm;\nAssessmentForm.propTypes = {\n  groupedAssessments: PropTypes.object.isRequired,\n  setValue: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  isSubmitting: PropTypes.bool\n};\nvar _c;\n$RefreshReg$(_c, \"AssessmentForm\");","map":{"version":3,"names":["React","PropTypes","useRiskMatrixStore","ICAORiskMatrix","IntegratedRiskMatrix","calculateICAORiskTolerability","jsxDEV","_jsxDEV","AssessmentForm","groupedAssessments","setValue","onSubmit","isSubmitting","_s","matrixType","allAssessments","Object","values","flatMap","group","assessments","handleMatrixChange","assessmentId","assessmentIndex","findIndex","a","consequence_id","console","error","log","probability","severity","tolerability","likelihood","impact","className","children","entries","map","event_id","event","groupIndex","fileName","_jsxFileName","lineNumber","columnNumber","assessment","index","hazard","consequence","current_controls","onChange","showTolerability","showRiskLevel","type","disabled","_c","propTypes","object","isRequired","func","bool","$RefreshReg$"],"sources":["C:/Users/tmh73/Aviation Synergy/MaXwell AI - General/HIRA_25/src/components/AssessmentForm.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useRiskMatrixStore } from '../stores/riskMatrixStore';\nimport ICAORiskMatrix from './ICAORiskMatrix';\nimport IntegratedRiskMatrix from './IntegratedRiskMatrix';\nimport { calculateICAORiskTolerability } from '../utils/riskCalculations';\n\nexport default function AssessmentForm({ groupedAssessments, setValue, onSubmit, isSubmitting }) {\n  const { matrixType } = useRiskMatrixStore();\n\n  // Flatten assessments list for indexing\n  const allAssessments = Object.values(groupedAssessments).flatMap(group => group.assessments);\n\n  const handleMatrixChange = (assessmentId, values) => {\n    const assessmentIndex = allAssessments.findIndex(\n      (a) => a.consequence_id === assessmentId\n    );\n\n    if (assessmentIndex === -1) {\n      console.error('Assessment not found for consequence_id:', assessmentId);\n      return;\n    }\n\n    console.log(\n      'Updating assessment:',\n      assessmentId,\n      'at index:',\n      assessmentIndex,\n      'with values:',\n      values\n    );\n\n    if (matrixType === 'ICAO') {\n      setValue(`assessments.${assessmentIndex}.probability`, values.probability);\n      setValue(`assessments.${assessmentIndex}.severity`, values.severity);\n      if (values.probability && values.severity) {\n        const tolerability = calculateICAORiskTolerability(values.probability, values.severity);\n        setValue(`assessments.${assessmentIndex}.tolerability`, tolerability);\n      }\n    } else {\n      setValue(`assessments.${assessmentIndex}.likelihood`, values.likelihood);\n      setValue(`assessments.${assessmentIndex}.impact`, values.impact);\n    }\n  };\n\n  return (\n    <form onSubmit={onSubmit} className=\"space-y-6\">\n      {Object.entries(groupedAssessments).map(([event_id, { event, assessments }], groupIndex) => (\n        <div key={`group-${event_id}-${groupIndex}`} className=\"bg-white rounded-lg shadow p-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">{event}</h3>\n\n          <div className=\"space-y-6\">\n            {assessments.map((assessment, index) => (\n              <div key={`assessment-${assessment.consequence_id}-${index}`} className=\"bg-gray-50 rounded-lg p-4\">\n                <div className=\"mb-4\">\n                  <h4 className=\"font-medium text-gray-700\">Hazard</h4>\n                  <p className=\"text-gray-600\">{assessment.hazard}</p>\n                </div>\n\n                <div className=\"mb-4\">\n                  <h4 className=\"font-medium text-gray-700\">Consequence</h4>\n                  <p className=\"text-gray-600\">{assessment.consequence}</p>\n                </div>\n\n                <div className=\"mb-4\">\n                  <h4 className=\"font-medium text-gray-700\">Current Controls</h4>\n                  <p className=\"text-gray-600\">{assessment.current_controls}</p>\n                </div>\n\n                <div>\n                  {matrixType === 'ICAO' ? (\n                    <ICAORiskMatrix\n                      probability={assessment.probability}\n                      severity={assessment.severity}\n                      onChange={(values) => handleMatrixChange(assessment.consequence_id, values)}\n                      showTolerability={true}\n                      tolerability={assessment.tolerability}\n                    />\n                  ) : (\n                    <IntegratedRiskMatrix\n                      likelihood={assessment.likelihood}\n                      impact={assessment.impact}\n                      onChange={(values) => handleMatrixChange(assessment.consequence_id, values)}\n                      showRiskLevel={true}\n                    />\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ))}\n\n      <div className=\"flex justify-end\">\n        <button\n          type=\"submit\"\n          disabled={isSubmitting}\n          className={`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200 ${\n            isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          {isSubmitting ? 'Saving...' : 'Next Step'}\n        </button>\n      </div>\n    </form>\n  );\n}\n\nAssessmentForm.propTypes = {\n  groupedAssessments: PropTypes.object.isRequired,\n  setValue: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  isSubmitting: PropTypes.bool\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}