{"ast":null,"code":"import { create } from 'zustand';\nimport { supabase } from '../services/supabase';\nconst useProjectStore = create((set, get) => ({\n  projects: [],\n  currentProject: null,\n  currentStep: 0,\n  isLoading: false,\n  error: null,\n  setCurrentProject: project => set({\n    currentProject: project\n  }),\n  setCurrentStep: step => set({\n    currentStep: step\n  }),\n  clearError: () => set({\n    error: null\n  }),\n  setLoading: isLoading => set({\n    isLoading\n  }),\n  loadProjects: async () => {\n    set({\n      isLoading: true,\n      error: null\n    });\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('hira_projects').select('*').order('created_at', {\n        ascending: false\n      });\n      if (error) throw error;\n      set({\n        projects: data || []\n      });\n    } catch (error) {\n      set({\n        error: error.message\n      });\n    } finally {\n      set({\n        isLoading: false\n      });\n    }\n  },\n  createProject: async projectData => {\n    set({\n      isLoading: true,\n      error: null\n    });\n    try {\n      const formattedData = {\n        project_id: projectData.projectId,\n        title: projectData.title,\n        date: projectData.date,\n        facilitator: projectData.facilitator,\n        attendees: projectData.attendees || [],\n        operational_desc: projectData.operational_desc,\n        operational_files: projectData.operational_files\n      };\n      const {\n        data,\n        error\n      } = await supabase.from('hira_projects').insert([formattedData]).select().single();\n      if (error) throw error;\n      set(state => ({\n        projects: [data, ...state.projects],\n        currentProject: data\n      }));\n    } catch (error) {\n      console.error('Create project error:', error);\n      set({\n        error: error.message\n      });\n      throw error;\n    } finally {\n      set({\n        isLoading: false\n      });\n    }\n  },\n  updateProject: async (projectId, projectData) => {\n    set({\n      isLoading: true,\n      error: null\n    });\n    try {\n      const formattedData = {\n        title: projectData.title,\n        date: projectData.date,\n        facilitator: projectData.facilitator,\n        attendees: projectData.attendees || [],\n        operational_desc: projectData.operational_desc,\n        operational_files: projectData.operational_files\n      };\n      const {\n        data,\n        error\n      } = await supabase.from('hira_projects').update(formattedData).eq('project_id', projectId).select().single();\n      if (error) throw error;\n      set(state => ({\n        projects: state.projects.map(p => p.project_id === projectId ? data : p),\n        currentProject: data\n      }));\n    } catch (error) {\n      console.error('Update project error:', error);\n      set({\n        error: error.message\n      });\n      throw error;\n    } finally {\n      set({\n        isLoading: false\n      });\n    }\n  },\n  deleteProject: async projectId => {\n    set({\n      isLoading: true,\n      error: null\n    });\n    try {\n      const {\n        error\n      } = await supabase.from('hira_projects').delete().eq('project_id', projectId);\n      if (error) throw error;\n      set(state => ({\n        projects: state.projects.filter(p => p.project_id !== projectId),\n        currentProject: null\n      }));\n    } catch (error) {\n      console.error('Delete project error:', error);\n      set({\n        error: error.message\n      });\n      throw error;\n    } finally {\n      set({\n        isLoading: false\n      });\n    }\n  }\n}));\nexport default useProjectStore;","map":{"version":3,"names":["create","supabase","useProjectStore","set","get","projects","currentProject","currentStep","isLoading","error","setCurrentProject","project","setCurrentStep","step","clearError","setLoading","loadProjects","data","from","select","order","ascending","message","createProject","projectData","formattedData","project_id","projectId","title","date","facilitator","attendees","operational_desc","operational_files","insert","single","state","console","updateProject","update","eq","map","p","deleteProject","delete","filter"],"sources":["C:/Users/tmh73/Aviation Synergy/MaXwell AI - General/HIRA_AppBolt/src-new/src/stores/projectStore.js"],"sourcesContent":["import { create } from 'zustand';\r\nimport { supabase } from '../services/supabase';\r\n\r\nconst useProjectStore = create((set, get) => ({\r\n  projects: [],\r\n  currentProject: null,\r\n  currentStep: 0,\r\n  isLoading: false,\r\n  error: null,\r\n\r\n  setCurrentProject: (project) => set({ currentProject: project }),\r\n  setCurrentStep: (step) => set({ currentStep: step }),\r\n  clearError: () => set({ error: null }),\r\n  setLoading: (isLoading) => set({ isLoading }),\r\n\r\n  loadProjects: async () => {\r\n    set({ isLoading: true, error: null });\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('hira_projects')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      set({ projects: data || [] });\r\n    } catch (error) {\r\n      set({ error: error.message });\r\n    } finally {\r\n      set({ isLoading: false });\r\n    }\r\n  },\r\n\r\n  createProject: async (projectData) => {\r\n    set({ isLoading: true, error: null });\r\n    try {\r\n      const formattedData = {\r\n        project_id: projectData.projectId,\r\n        title: projectData.title,\r\n        date: projectData.date,\r\n        facilitator: projectData.facilitator,\r\n        attendees: projectData.attendees || [],\r\n        operational_desc: projectData.operational_desc,\r\n        operational_files: projectData.operational_files\r\n      };\r\n\r\n      const { data, error } = await supabase\r\n        .from('hira_projects')\r\n        .insert([formattedData])\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      set((state) => ({\r\n        projects: [data, ...state.projects],\r\n        currentProject: data\r\n      }));\r\n    } catch (error) {\r\n      console.error('Create project error:', error);\r\n      set({ error: error.message });\r\n      throw error;\r\n    } finally {\r\n      set({ isLoading: false });\r\n    }\r\n  },\r\n\r\n  updateProject: async (projectId, projectData) => {\r\n    set({ isLoading: true, error: null });\r\n    try {\r\n      const formattedData = {\r\n        title: projectData.title,\r\n        date: projectData.date,\r\n        facilitator: projectData.facilitator,\r\n        attendees: projectData.attendees || [],\r\n        operational_desc: projectData.operational_desc,\r\n        operational_files: projectData.operational_files\r\n      };\r\n\r\n      const { data, error } = await supabase\r\n        .from('hira_projects')\r\n        .update(formattedData)\r\n        .eq('project_id', projectId)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      set((state) => ({\r\n        projects: state.projects.map((p) =>\r\n          p.project_id === projectId ? data : p\r\n        ),\r\n        currentProject: data\r\n      }));\r\n    } catch (error) {\r\n      console.error('Update project error:', error);\r\n      set({ error: error.message });\r\n      throw error;\r\n    } finally {\r\n      set({ isLoading: false });\r\n    }\r\n  },\r\n\r\n  deleteProject: async (projectId) => {\r\n    set({ isLoading: true, error: null });\r\n    try {\r\n      const { error } = await supabase\r\n        .from('hira_projects')\r\n        .delete()\r\n        .eq('project_id', projectId);\r\n\r\n      if (error) throw error;\r\n\r\n      set((state) => ({\r\n        projects: state.projects.filter((p) => p.project_id !== projectId),\r\n        currentProject: null\r\n      }));\r\n    } catch (error) {\r\n      console.error('Delete project error:', error);\r\n      set({ error: error.message });\r\n      throw error;\r\n    } finally {\r\n      set({ isLoading: false });\r\n    }\r\n  }\r\n}));\r\n\r\nexport default useProjectStore;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}