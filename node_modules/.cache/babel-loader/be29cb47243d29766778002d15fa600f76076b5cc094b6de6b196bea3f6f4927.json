{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tmh73\\\\Aviation Synergy\\\\MaXwell AI - General\\\\HIRA_25\\\\src\\\\components\\\\HazardIdentification.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useForm, useFieldArray } from 'react-hook-form';\nimport { Plus, Trash2, PlusCircle, MinusCircle } from 'lucide-react';\nimport { v4 as uuidv4 } from 'uuid';\nimport useFormStore from '../stores/formStore';\nimport { supabase } from '../services/supabase';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HazardEvent = ({\n  eventIndex,\n  register,\n  control,\n  removeEvent\n}) => {\n  _s();\n  const {\n    fields: hazards,\n    append: appendHazard,\n    remove: removeHazard\n  } = useFieldArray({\n    control,\n    name: `events.${eventIndex}.hazards`\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"border rounded-lg p-6 bg-gray-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-start\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 mr-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Safety Event\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 21,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            ...register(`events.${eventIndex}.name`),\n            placeholder: \"Describe the safety event\",\n            className: \"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 11\n        }, this), eventIndex > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => removeEvent(eventIndex),\n          className: \"text-red-600 hover:text-red-800\",\n          children: /*#__PURE__*/_jsxDEV(Trash2, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: [hazards.map((hazard, hazardIndex) => /*#__PURE__*/_jsxDEV(HazardItem, {\n          eventIndex: eventIndex,\n          hazardIndex: hazardIndex,\n          register: register,\n          control: control,\n          removeHazard: removeHazard\n        }, hazard.uniqueId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => appendHazard({\n            uniqueId: uuidv4(),\n            description: '',\n            consequences: [{\n              uniqueId: uuidv4(),\n              description: '',\n              currentControls: ''\n            }]\n          }),\n          className: \"ml-6 inline-flex items-center text-sm text-blue-600 hover:text-blue-800\",\n          children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n            className: \"h-4 w-4 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), \"Add Hazard\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 5\n  }, this);\n};\n_s(HazardEvent, \"wZXmHbNDMQjyqd6G3yx9F7+spq0=\", false, function () {\n  return [useFieldArray];\n});\n_c = HazardEvent;\nconst HazardItem = ({\n  eventIndex,\n  hazardIndex,\n  register,\n  control,\n  removeHazard\n}) => {\n  _s2();\n  const {\n    fields: consequences,\n    append: appendConsequence,\n    remove: removeConsequence\n  } = useFieldArray({\n    control,\n    name: `events.${eventIndex}.hazards.${hazardIndex}.consequences`\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pl-6 border-l-2 border-blue-200\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-start\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 mr-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Hazard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            ...register(`events.${eventIndex}.hazards.${hazardIndex}.description`),\n            placeholder: \"Describe the hazard\",\n            className: \"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), hazardIndex > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => removeHazard(hazardIndex),\n          className: \"text-red-600 hover:text-red-800\",\n          children: /*#__PURE__*/_jsxDEV(MinusCircle, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pl-6 space-y-4\",\n        children: [consequences.map((consequence, consequenceIndex) => /*#__PURE__*/_jsxDEV(ConsequenceItem, {\n          eventIndex: eventIndex,\n          hazardIndex: hazardIndex,\n          consequenceIndex: consequenceIndex,\n          register: register,\n          removeConsequence: removeConsequence\n        }, consequence.uniqueId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => appendConsequence({\n            uniqueId: uuidv4(),\n            description: '',\n            currentControls: ''\n          }),\n          className: \"ml-6 inline-flex items-center text-sm text-blue-600 hover:text-blue-800\",\n          children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n            className: \"h-4 w-4 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), \"Add Consequence\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s2(HazardItem, \"F9MgxRcp4WtrYWzxWIyo66QS0K4=\", false, function () {\n  return [useFieldArray];\n});\n_c2 = HazardItem;\nconst ConsequenceItem = ({\n  eventIndex,\n  hazardIndex,\n  consequenceIndex,\n  register,\n  removeConsequence\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"border-l-2 border-green-200 pl-6\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 mr-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700 mb-1\",\n          children: \"Consequence\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ...register(`events.${eventIndex}.hazards.${hazardIndex}.consequences.${consequenceIndex}.description`),\n          placeholder: \"Describe the consequence\",\n          className: \"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), consequenceIndex > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => removeConsequence(consequenceIndex),\n        className: \"text-red-600 hover:text-red-800\",\n        children: /*#__PURE__*/_jsxDEV(MinusCircle, {\n          className: \"h-5 w-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm font-medium text-gray-700 mb-1\",\n        children: \"Current Controls\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ...register(`events.${eventIndex}.hazards.${hazardIndex}.consequences.${consequenceIndex}.currentControls`),\n        rows: 2,\n        placeholder: \"List current control measures\",\n        className: \"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 135,\n  columnNumber: 3\n}, this);\n_c3 = ConsequenceItem;\nexport default function HazardIdentification({\n  onSubmit,\n  initialData\n}) {\n  _s3();\n  const {\n    hazards,\n    updateFormData\n  } = useFormStore();\n  const navigate = useNavigate();\n\n  // Create default event structure\n  const defaultEvent = {\n    uniqueId: uuidv4(),\n    name: '',\n    hazards: [{\n      uniqueId: uuidv4(),\n      description: '',\n      consequences: [{\n        uniqueId: uuidv4(),\n        description: '',\n        currentControls: ''\n      }]\n    }]\n  };\n\n  // Get initial events from various sources, with fallback to default\n  const initialEvents = initialData !== null && initialData !== void 0 && initialData.events || ((hazards === null || hazards === void 0 ? void 0 : hazards.events) || []).length > 0 ? hazards.events : [defaultEvent];\n  const {\n    register,\n    control,\n    handleSubmit,\n    watch\n  } = useForm({\n    defaultValues: {\n      events: initialEvents\n    }\n  });\n\n  // Watch form values for debugging\n  const watchEvents = watch('events');\n  const {\n    fields: events,\n    append: appendEvent,\n    remove: removeEvent\n  } = useFieldArray({\n    control,\n    name: \"events\"\n  });\n  const handleFormSubmit = async data => {\n    // Ensure all IDs are preserved and data is properly structured\n    const formattedData = {\n      events: data.events.map(event => ({\n        uniqueId: event.uniqueId || uuidv4(),\n        name: event.name,\n        hazards: event.hazards.map(hazard => ({\n          uniqueId: hazard.uniqueId || uuidv4(),\n          description: hazard.description,\n          consequences: hazard.consequences.map(consequence => ({\n            uniqueId: consequence.uniqueId || uuidv4(),\n            description: consequence.description,\n            currentControls: consequence.currentControls || ''\n          }))\n        }))\n      }))\n    };\n\n    // Update form store before submitting\n    updateFormData(2, formattedData);\n\n    // Submit the data\n    await supabase.from('hazards').insert(formattedData.events.flatMap(event => event.hazards.map(hazard => ({\n      event_id: event.uniqueId,\n      description: hazard.description,\n      consequences: hazard.consequences\n    }))));\n    onSubmit(formattedData);\n    navigate('/risk-assessment'); // Navigate to the Risk Assessment page\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6 max-w-6xl mx-auto p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow-md rounded-lg p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-gray-800 mb-6\",\n        children: \"Hazard Identification\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(handleFormSubmit),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-8\",\n          children: [events.map((event, eventIndex) => /*#__PURE__*/_jsxDEV(HazardEvent, {\n            eventIndex: eventIndex,\n            register: register,\n            control: control,\n            removeEvent: removeEvent\n          }, event.uniqueId || eventIndex, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => appendEvent(defaultEvent),\n              className: \"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200\",\n              children: [/*#__PURE__*/_jsxDEV(Plus, {\n                className: \"h-4 w-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this), \"Add Safety Event\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",\n              children: \"Next Step\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n}\n_s3(HazardIdentification, \"/8pjNdUL2C9uY9p5VZ7pQXX/AN8=\", false, function () {\n  return [useFormStore, useNavigate, useForm, useFieldArray];\n});\n_c4 = HazardIdentification;\nHazardIdentification.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n  initialData: PropTypes.shape({\n    events: PropTypes.arrayOf(PropTypes.shape({\n      uniqueId: PropTypes.string,\n      name: PropTypes.string,\n      hazards: PropTypes.arrayOf(PropTypes.shape({\n        uniqueId: PropTypes.string,\n        description: PropTypes.string,\n        consequences: PropTypes.arrayOf(PropTypes.shape({\n          uniqueId: PropTypes.string,\n          description: PropTypes.string,\n          currentControls: PropTypes.string\n        }))\n      }))\n    }))\n  })\n};\nHazardEvent.propTypes = {\n  eventIndex: PropTypes.number.isRequired,\n  register: PropTypes.func.isRequired,\n  control: PropTypes.object.isRequired,\n  removeEvent: PropTypes.func.isRequired\n};\nHazardItem.propTypes = {\n  eventIndex: PropTypes.number.isRequired,\n  hazardIndex: PropTypes.number.isRequired,\n  register: PropTypes.func.isRequired,\n  control: PropTypes.object.isRequired,\n  removeHazard: PropTypes.func.isRequired\n};\nConsequenceItem.propTypes = {\n  eventIndex: PropTypes.number.isRequired,\n  hazardIndex: PropTypes.number.isRequired,\n  consequenceIndex: PropTypes.number.isRequired,\n  register: PropTypes.func.isRequired,\n  removeConsequence: PropTypes.func.isRequired\n};\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"HazardEvent\");\n$RefreshReg$(_c2, \"HazardItem\");\n$RefreshReg$(_c3, \"ConsequenceItem\");\n$RefreshReg$(_c4, \"HazardIdentification\");","map":{"version":3,"names":["React","PropTypes","useForm","useFieldArray","Plus","Trash2","PlusCircle","MinusCircle","v4","uuidv4","useFormStore","supabase","useNavigate","jsxDEV","_jsxDEV","HazardEvent","eventIndex","register","control","removeEvent","_s","fields","hazards","append","appendHazard","remove","removeHazard","name","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onClick","map","hazard","hazardIndex","HazardItem","uniqueId","description","consequences","currentControls","_c","_s2","appendConsequence","removeConsequence","consequence","consequenceIndex","ConsequenceItem","_c2","rows","_c3","HazardIdentification","onSubmit","initialData","_s3","updateFormData","navigate","defaultEvent","initialEvents","events","length","handleSubmit","watch","defaultValues","watchEvents","appendEvent","handleFormSubmit","data","formattedData","event","from","insert","flatMap","event_id","_c4","propTypes","func","isRequired","shape","arrayOf","string","number","object","$RefreshReg$"],"sources":["C:/Users/tmh73/Aviation Synergy/MaXwell AI - General/HIRA_25/src/components/HazardIdentification.jsx"],"sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useForm, useFieldArray } from 'react-hook-form';\r\nimport { Plus, Trash2, PlusCircle, MinusCircle } from 'lucide-react';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport useFormStore from '../stores/formStore';\r\nimport { supabase } from '../services/supabase';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst HazardEvent = ({ eventIndex, register, control, removeEvent }) => {\r\n  const { fields: hazards, append: appendHazard, remove: removeHazard } = useFieldArray({\r\n    control,\r\n    name: `events.${eventIndex}.hazards`\r\n  });\r\n\r\n  return (\r\n    <div className=\"border rounded-lg p-6 bg-gray-50\">\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex justify-between items-start\">\r\n          <div className=\"flex-1 mr-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Safety Event</label>\r\n            <input\r\n              type=\"text\"\r\n              {...register(`events.${eventIndex}.name`)}\r\n              placeholder=\"Describe the safety event\"\r\n              className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          {eventIndex > 0 && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => removeEvent(eventIndex)}\r\n              className=\"text-red-600 hover:text-red-800\"\r\n            >\r\n              <Trash2 className=\"h-5 w-5\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"space-y-6\">\r\n          {hazards.map((hazard, hazardIndex) => (\r\n            <HazardItem\r\n              key={hazard.uniqueId}\r\n              eventIndex={eventIndex}\r\n              hazardIndex={hazardIndex}\r\n              register={register}\r\n              control={control}\r\n              removeHazard={removeHazard}\r\n            />\r\n          ))}\r\n\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => appendHazard({\r\n              uniqueId: uuidv4(),\r\n              description: '',\r\n              consequences: [{\r\n                uniqueId: uuidv4(),\r\n                description: '',\r\n                currentControls: ''\r\n              }]\r\n            })}\r\n            className=\"ml-6 inline-flex items-center text-sm text-blue-600 hover:text-blue-800\"\r\n          >\r\n            <PlusCircle className=\"h-4 w-4 mr-1\" />\r\n            Add Hazard\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst HazardItem = ({ eventIndex, hazardIndex, register, control, removeHazard }) => {\r\n  const { fields: consequences, append: appendConsequence, remove: removeConsequence } = useFieldArray({\r\n    control,\r\n    name: `events.${eventIndex}.hazards.${hazardIndex}.consequences`\r\n  });\r\n\r\n  return (\r\n    <div className=\"pl-6 border-l-2 border-blue-200\">\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex justify-between items-start\">\r\n          <div className=\"flex-1 mr-4\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Hazard</label>\r\n            <input\r\n              type=\"text\"\r\n              {...register(`events.${eventIndex}.hazards.${hazardIndex}.description`)}\r\n              placeholder=\"Describe the hazard\"\r\n              className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n          {hazardIndex > 0 && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => removeHazard(hazardIndex)}\r\n              className=\"text-red-600 hover:text-red-800\"\r\n            >\r\n              <MinusCircle className=\"h-5 w-5\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"pl-6 space-y-4\">\r\n          {consequences.map((consequence, consequenceIndex) => (\r\n            <ConsequenceItem\r\n              key={consequence.uniqueId}\r\n              eventIndex={eventIndex}\r\n              hazardIndex={hazardIndex}\r\n              consequenceIndex={consequenceIndex}\r\n              register={register}\r\n              removeConsequence={removeConsequence}\r\n            />\r\n          ))}\r\n\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => appendConsequence({\r\n              uniqueId: uuidv4(),\r\n              description: '',\r\n              currentControls: ''\r\n            })}\r\n            className=\"ml-6 inline-flex items-center text-sm text-blue-600 hover:text-blue-800\"\r\n          >\r\n            <PlusCircle className=\"h-4 w-4 mr-1\" />\r\n            Add Consequence\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ConsequenceItem = ({ eventIndex, hazardIndex, consequenceIndex, register, removeConsequence }) => (\r\n  <div className=\"border-l-2 border-green-200 pl-6\">\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex justify-between items-start\">\r\n        <div className=\"flex-1 mr-4\">\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Consequence\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            {...register(\r\n              `events.${eventIndex}.hazards.${hazardIndex}.consequences.${consequenceIndex}.description`\r\n            )}\r\n            placeholder=\"Describe the consequence\"\r\n            className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n          />\r\n        </div>\r\n        {consequenceIndex > 0 && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => removeConsequence(consequenceIndex)}\r\n            className=\"text-red-600 hover:text-red-800\"\r\n          >\r\n            <MinusCircle className=\"h-5 w-5\" />\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          Current Controls\r\n        </label>\r\n        <textarea\r\n          {...register(\r\n            `events.${eventIndex}.hazards.${hazardIndex}.consequences.${consequenceIndex}.currentControls`\r\n          )}\r\n          rows={2}\r\n          placeholder=\"List current control measures\"\r\n          className=\"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default function HazardIdentification({ onSubmit, initialData }) {\r\n  const { hazards, updateFormData } = useFormStore();\r\n  const navigate = useNavigate();\r\n\r\n  // Create default event structure\r\n  const defaultEvent = {\r\n    uniqueId: uuidv4(),\r\n    name: '',\r\n    hazards: [{\r\n      uniqueId: uuidv4(),\r\n      description: '',\r\n      consequences: [{\r\n        uniqueId: uuidv4(),\r\n        description: '',\r\n        currentControls: ''\r\n      }]\r\n    }]\r\n  };\r\n\r\n  // Get initial events from various sources, with fallback to default\r\n  const initialEvents = initialData?.events || \r\n                       (hazards?.events || []).length > 0 ? hazards.events : \r\n                       [defaultEvent];\r\n\r\n  const { register, control, handleSubmit, watch } = useForm({\r\n    defaultValues: {\r\n      events: initialEvents\r\n    }\r\n  });\r\n\r\n  // Watch form values for debugging\r\n  const watchEvents = watch('events');\r\n\r\n  const { fields: events, append: appendEvent, remove: removeEvent } = useFieldArray({\r\n    control,\r\n    name: \"events\"\r\n  });\r\n\r\n  const handleFormSubmit = async (data) => {\r\n    // Ensure all IDs are preserved and data is properly structured\r\n    const formattedData = {\r\n      events: data.events.map(event => ({\r\n        uniqueId: event.uniqueId || uuidv4(),\r\n        name: event.name,\r\n        hazards: event.hazards.map(hazard => ({\r\n          uniqueId: hazard.uniqueId || uuidv4(),\r\n          description: hazard.description,\r\n          consequences: hazard.consequences.map(consequence => ({\r\n            uniqueId: consequence.uniqueId || uuidv4(),\r\n            description: consequence.description,\r\n            currentControls: consequence.currentControls || ''\r\n          }))\r\n        }))\r\n      }))\r\n    };\r\n\r\n    // Update form store before submitting\r\n    updateFormData(2, formattedData);\r\n\r\n    // Submit the data\r\n    await supabase.from('hazards').insert(\r\n      formattedData.events.flatMap(event => \r\n        event.hazards.map(hazard => ({\r\n          event_id: event.uniqueId,\r\n          description: hazard.description,\r\n          consequences: hazard.consequences\r\n        }))\r\n      )\r\n    );\r\n\r\n    onSubmit(formattedData);\r\n    navigate('/risk-assessment'); // Navigate to the Risk Assessment page\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 max-w-6xl mx-auto p-6\">\r\n      <div className=\"bg-white shadow-md rounded-lg p-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6\">Hazard Identification</h2>\r\n\r\n        <form onSubmit={handleSubmit(handleFormSubmit)}>\r\n          <div className=\"space-y-8\">\r\n            {events.map((event, eventIndex) => (\r\n              <HazardEvent\r\n                key={event.uniqueId || eventIndex}\r\n                eventIndex={eventIndex}\r\n                register={register}\r\n                control={control}\r\n                removeEvent={removeEvent}\r\n              />\r\n            ))}\r\n\r\n            <div className=\"flex justify-between\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => appendEvent(defaultEvent)}\r\n                className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200\"\r\n              >\r\n                <Plus className=\"h-4 w-4 mr-2\" />\r\n                Add Safety Event\r\n              </button>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\r\n              >\r\n                Next Step\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nHazardIdentification.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n  initialData: PropTypes.shape({\r\n    events: PropTypes.arrayOf(PropTypes.shape({\r\n      uniqueId: PropTypes.string,\r\n      name: PropTypes.string,\r\n      hazards: PropTypes.arrayOf(PropTypes.shape({\r\n        uniqueId: PropTypes.string,\r\n        description: PropTypes.string,\r\n        consequences: PropTypes.arrayOf(PropTypes.shape({\r\n          uniqueId: PropTypes.string,\r\n          description: PropTypes.string,\r\n          currentControls: PropTypes.string\r\n        }))\r\n      }))\r\n    }))\r\n  })\r\n};\r\n\r\nHazardEvent.propTypes = {\r\n  eventIndex: PropTypes.number.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  control: PropTypes.object.isRequired,\r\n  removeEvent: PropTypes.func.isRequired\r\n};\r\n\r\nHazardItem.propTypes = {\r\n  eventIndex: PropTypes.number.isRequired,\r\n  hazardIndex: PropTypes.number.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  control: PropTypes.object.isRequired,\r\n  removeHazard: PropTypes.func.isRequired\r\n};\r\n\r\nConsequenceItem.propTypes = {\r\n  eventIndex: PropTypes.number.isRequired,\r\n  hazardIndex: PropTypes.number.isRequired,\r\n  consequenceIndex: PropTypes.number.isRequired,\r\n  register: PropTypes.func.isRequired,\r\n  removeConsequence: PropTypes.func.isRequired\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}